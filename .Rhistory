for(i in seq(1,length(test$timestamp),2)){
comp_event = gpu_perf %>%
filter(hostname == test$hostname[i])
comp_event = comp_event %>%
filter(timestamp >= test$timestamp[i] & timestamp <= test$timestamp[i+1]) %>%
group_by(hostname, gpuSerial) %>%
summarise(watt = mean(powerDrawWatt), temp = mean(gpuTempC), cpu = mean(gpuUtilPerc), mem = mean(gpuMemUtilPerc)) %>%
mutate(eventName = test$eventName[i], taskId = test$taskId[i])
if(is.na(comp_event$hostname[1])){
comp_event[i,] = c('test',0,0,0,0,0)
}
df = rbind(df, comp_event)
}
df = data.frame()
names(df) = c("hostname","gpuSerial","watt","temp","cpu","mem")
for(i in seq(1,length(test$timestamp),2)){
comp_event = gpu_perf %>%
filter(hostname == test$hostname[i])
comp_event = comp_event %>%
filter(timestamp >= test$timestamp[i] & timestamp <= test$timestamp[i+1]) %>%
group_by(hostname, gpuSerial) %>%
summarise(watt = mean(powerDrawWatt), temp = mean(gpuTempC), cpu = mean(gpuUtilPerc), mem = mean(gpuMemUtilPerc)) %>%
mutate(eventName = test$eventName[i], taskId = test$taskId[i])
if(is.na(comp_event$hostname[1])){
comp_event[i,] = c('test',0,0,0,0,0,test$eventName[i],taskId = test$taskId[i])
}
df = rbind(df, comp_event)
}
View(df)
df = data.frame()
names(df) = c("hostname","gpuSerial","watt","temp","cpu","mem")
for(i in seq(1,length(test$timestamp),2)){
comp_event = gpu_perf %>%
filter(hostname == test$hostname[i])
comp_event = comp_event %>%
filter(timestamp >= test$timestamp[i] & timestamp <= test$timestamp[i+1]) %>%
group_by(hostname, gpuSerial) %>%
summarise(watt = mean(powerDrawWatt), temp = mean(gpuTempC), cpu = mean(gpuUtilPerc), mem = mean(gpuMemUtilPerc)) %>%
mutate(eventName = test$eventName[i], taskId = test$taskId[i])
if(is.na(comp_event$hostname[1])){
comp_event[i,] = c('test',0,0,0,0,0,test$eventName[i],taskId = test$taskId[i])
}
print(comp_event)
df = rbind(df, comp_event)
}
df = data.frame()
names(df) = c("hostname","gpuSerial","watt","temp","cpu","mem","test1","test2")
for(i in seq(1,length(test$timestamp),2)){
comp_event = gpu_perf %>%
filter(hostname == test$hostname[i])
comp_event = comp_event %>%
filter(timestamp >= test$timestamp[i] & timestamp <= test$timestamp[i+1]) %>%
group_by(hostname, gpuSerial) %>%
summarise(watt = mean(powerDrawWatt), temp = mean(gpuTempC), cpu = mean(gpuUtilPerc), mem = mean(gpuMemUtilPerc)) %>%
mutate(eventName = test$eventName[i], taskId = test$taskId[i])
if(is.na(comp_event$hostname[1])){
comp_event[i,] = c('test',0,0,0,0,0,test$eventName[i],taskId = test$taskId[i])
}
print(comp_event)
df = rbind(df, comp_event)
}
df = data.frame()
names(df) = c("hostname","gpuSerial","watt","temp","cpu","mem","test1","test2")
for(i in seq(1,length(test$timestamp),2)){
comp_event = gpu_perf %>%
filter(hostname == test$hostname[i])
comp_event = comp_event %>%
filter(timestamp >= test$timestamp[i] & timestamp <= test$timestamp[i+1]) %>%
group_by(hostname, gpuSerial) %>%
summarise(watt = mean(powerDrawWatt), temp = mean(gpuTempC), cpu = mean(gpuUtilPerc), mem = mean(gpuMemUtilPerc)) %>%
mutate(eventName = test$eventName[i], taskId = test$taskId[i])
print(comp_event)
if(is.na(comp_event$hostname[1])){
comp_event[i,] = c('test',0,0,0,0,0,test$eventName[i],taskId = test$taskId[i])
}
print(comp_event)
df = rbind(df, comp_event)
}
df = data.frame()
names(df) = c("hostname","gpuSerial","watt","temp","cpu","mem","test1","test2")
c = 0
for(i in seq(1,length(test$timestamp),2)){
c = c + 1
comp_event = gpu_perf %>%
filter(hostname == test$hostname[i])
comp_event = comp_event %>%
filter(timestamp >= test$timestamp[i] & timestamp <= test$timestamp[i+1]) %>%
group_by(hostname, gpuSerial) %>%
summarise(watt = mean(powerDrawWatt), temp = mean(gpuTempC), cpu = mean(gpuUtilPerc), mem = mean(gpuMemUtilPerc)) %>%
mutate(eventName = test$eventName[i], taskId = test$taskId[i])
print(comp_event)
if(is.na(comp_event$hostname[1])){
comp_event[c,] = c('test',0,0,0,0,0,test$eventName[i],taskId = test$taskId[i])
}
print(comp_event)
df = rbind(df, comp_event)
}
df = data.frame()
names(df) = c("hostname","gpuSerial","watt","temp","cpu","mem","test1","test2")
c = 0
for(i in seq(1,length(test$timestamp),2)){
c = c + 1
comp_event = gpu_perf %>%
filter(hostname == test$hostname[i])
comp_event = comp_event %>%
filter(timestamp >= test$timestamp[i] & timestamp <= test$timestamp[i+1]) %>%
group_by(hostname, gpuSerial) %>%
summarise(watt = mean(powerDrawWatt), temp = mean(gpuTempC), cpu = mean(gpuUtilPerc), mem = mean(gpuMemUtilPerc)) %>%
mutate(eventName = test$eventName[i], taskId = test$taskId[i])
# print(comp_event)
if(is.na(comp_event$hostname[1])){
comp_event[c,] = c('test',0,0,0,0,0,0,0)
}
# print(comp_event)
df = rbind(df, comp_event)
}
df = data.frame()
names(df) = c("hostname","gpuSerial","watt","temp","cpu","mem","test1","test2")
c = 0
for(i in seq(1,length(test$timestamp),2)){
c = c + 1
comp_event = gpu_perf %>%
filter(hostname == test$hostname[i])
comp_event = comp_event %>%
filter(timestamp >= test$timestamp[i] & timestamp <= test$timestamp[i+1]) %>%
group_by(hostname, gpuSerial) %>%
summarise(watt = mean(powerDrawWatt), temp = mean(gpuTempC), cpu = mean(gpuUtilPerc), mem = mean(gpuMemUtilPerc)) %>%
mutate(eventName = test$eventName[i], taskId = test$taskId[i])
print(comp_event)
if(is.na(comp_event$hostname[1])){
comp_event[c,] = c('test',0,0,0,0,0,0,0)
}
print(comp_event)
df = rbind(df, comp_event)
}
df = data.frame()
names(df) = c("hostname","gpuSerial","watt","temp","cpu","mem","test1","test2")
c = 0
for(i in seq(1,length(test$timestamp),2)){
c = c + 1
comp_event = gpu_perf %>%
filter(hostname == test$hostname[i])
comp_event = comp_event %>%
filter(timestamp >= test$timestamp[i] & timestamp <= test$timestamp[i+1]) %>%
group_by(hostname, gpuSerial) %>%
summarise(watt = mean(powerDrawWatt), temp = mean(gpuTempC), cpu = mean(gpuUtilPerc), mem = mean(gpuMemUtilPerc)) %>%
mutate(eventName = test$eventName[i], taskId = test$taskId[i])
# print(comp_event)
if(is.na(comp_event$hostname[1])){
# comp_event[c,] = c('test',0,0,0,0,0,0,0)
df = rbind(df, comp_event)
}
# print(comp_event)
}
df = data.frame()
names(df) = c("hostname","gpuSerial","watt","temp","cpu","mem","test1","test2")
c = 0
for(i in seq(1,length(test$timestamp),2)){
c = c + 1
comp_event = gpu_perf %>%
filter(hostname == test$hostname[i])
comp_event = comp_event %>%
filter(timestamp >= test$timestamp[i] & timestamp <= test$timestamp[i+1]) %>%
group_by(hostname, gpuSerial) %>%
summarise(watt = mean(powerDrawWatt), temp = mean(gpuTempC), cpu = mean(gpuUtilPerc), mem = mean(gpuMemUtilPerc)) %>%
mutate(eventName = test$eventName[i], taskId = test$taskId[i])
# print(comp_event)
if(!is.na(comp_event$hostname[1])){
# comp_event[c,] = c('test',0,0,0,0,0,0,0)
df = rbind(df, comp_event)
}
# print(comp_event)
}
df = data.frame()
names(df) = c("hostname","gpuSerial","watt","temp","cpu","mem","test1","test2")
c = 0
for(i in seq(1,length(test$timestamp),2)){
c = c + 1
comp_event = gpu_perf %>%
filter(hostname == test$hostname[i])
comp_event = comp_event %>%
filter(timestamp >= test$timestamp[i] & timestamp <= test$timestamp[i+1]) %>%
group_by(hostname, gpuSerial) %>%
summarise(watt = mean(powerDrawWatt), temp = mean(gpuTempC), cpu = mean(gpuUtilPerc), mem = mean(gpuMemUtilPerc)) %>%
mutate(eventName = test$eventName[i], taskId = test$taskId[i])
print(comp_event)
if(!is.na(comp_event$hostname[1])){
# comp_event[c,] = c('test',0,0,0,0,0,0,0)
df = rbind(df, comp_event)
}
print(comp_event)
}
df = data.frame()
names(df) = c("hostname","gpuSerial","watt","temp","cpu","mem","test1","test2")
c = 0
for(i in seq(1,length(test$timestamp),2)){
c = c + 1
comp_event = gpu_perf %>%
filter(hostname == test$hostname[i])
comp_event = comp_event %>%
filter(timestamp >= test$timestamp[i] & timestamp <= test$timestamp[i+1]) %>%
group_by(hostname, gpuSerial) %>%
summarise(watt = mean(powerDrawWatt), temp = mean(gpuTempC), cpu = mean(gpuUtilPerc), mem = mean(gpuMemUtilPerc)) %>%
mutate(eventName = test$eventName[i], taskId = test$taskId[i])
print(test$eventName)
print(comp_event)
if(!is.na(comp_event$hostname[1])){
# comp_event[c,] = c('test',0,0,0,0,0,0,0)
df = rbind(df, comp_event)
}
print(comp_event)
}
View(df)
df = data.frame()
names(df) = c("hostname","gpuSerial","watt","temp","cpu","mem","test1","test2")
c = 0
for(i in seq(1,length(test$timestamp),2)){
c = c + 1
comp_event = gpu_perf %>%
filter(hostname == test$hostname[i])
comp_event = comp_event %>%
filter(timestamp >= test$timestamp[i] & timestamp <= test$timestamp[i+1]) %>%
group_by(hostname, gpuSerial) %>%
summarise(watt = mean(powerDrawWatt), temp = mean(gpuTempC), cpu = mean(gpuUtilPerc), mem = mean(gpuMemUtilPerc)) %>%
mutate(eventName = test$eventName[i], taskId = test$taskId[i])
print(test$eventName[i])
print(comp_event)
if(!is.na(comp_event$hostname[1])){
# comp_event[c,] = c('test',0,0,0,0,0,0,0)
df = rbind(df, comp_event)
}
print(comp_event)
}
df = data.frame()
# names(df) = c("hostname","gpuSerial","watt","temp","cpu","mem","test1","test2")
c = 0
for(i in seq(1,length(test$timestamp),2)){
c = c + 1
comp_event = gpu_perf %>%
filter(hostname == test$hostname[i])
comp_event = comp_event %>%
filter(timestamp >= test$timestamp[i] & timestamp <= test$timestamp[i+1]) %>%
group_by(hostname, gpuSerial) %>%
summarise(watt = mean(powerDrawWatt), temp = mean(gpuTempC), cpu = mean(gpuUtilPerc), mem = mean(gpuMemUtilPerc)) %>%
mutate(eventName = test$eventName[i], taskId = test$taskId[i])
print(test$eventName[i])
# print(comp_event)
if(!is.na(comp_event$hostname[1])){
# comp_event[c,] = c('test',0,0,0,0,0,0,0)
df = rbind(df, comp_event)
}
# print(comp_event)
}
test$eventName= as.character(test$eventName)
df = data.frame()
# names(df) = c("hostname","gpuSerial","watt","temp","cpu","mem","test1","test2")
c = 0
for(i in seq(1,length(test$timestamp),2)){
c = c + 1
comp_event = gpu_perf %>%
filter(hostname == test$hostname[i])
comp_event = comp_event %>%
filter(timestamp >= test$timestamp[i] & timestamp <= test$timestamp[i+1]) %>%
group_by(hostname, gpuSerial) %>%
summarise(watt = mean(powerDrawWatt), temp = mean(gpuTempC), cpu = mean(gpuUtilPerc), mem = mean(gpuMemUtilPerc)) %>%
mutate(eventName = test$eventName[i], taskId = test$taskId[i])
print(test$eventName[i])
# print(comp_event)
if(!is.na(comp_event$hostname[1])){
# comp_event[c,] = c('test',0,0,0,0,0,0,0)
df = rbind(df, comp_event)
}
# print(comp_event)
}
df = data.frame()
# names(df) = c("hostname","gpuSerial","watt","temp","cpu","mem","test1","test2")
c = 0
for(i in seq(1,length(test$timestamp),2)){
c = c + 1
comp_event = gpu_perf %>%
filter(hostname == test$hostname[i])
comp_event = comp_event %>%
filter(timestamp >= test$timestamp[i] & timestamp <= test$timestamp[i+1]) %>%
group_by(hostname, gpuSerial) %>%
summarise(watt = mean(powerDrawWatt), temp = mean(gpuTempC), cpu = mean(gpuUtilPerc), mem = mean(gpuMemUtilPerc)) %>%
mutate(eventName = test$eventName[i], taskId = test$taskId[i])
print(test$eventName[i])
print(comp_event)
if(!is.na(comp_event$hostname[1])){
# comp_event[c,] = c('test',0,0,0,0,0,0,0)
df = rbind(df, comp_event)
}
print(comp_event)
}
df = data.frame()
# names(df) = c("hostname","gpuSerial","watt","temp","cpu","mem","test1","test2")
c = 0
for(i in seq(1,length(test$timestamp),2)){
c = c + 1
comp_event = gpu_perf %>%
filter(hostname == test$hostname[i])
comp_event = comp_event %>%
filter(timestamp >= test$timestamp[i] & timestamp <= test$timestamp[i+1]) %>%
group_by(hostname, gpuSerial) %>%
summarise(watt = mean(powerDrawWatt), temp = mean(gpuTempC), cpu = mean(gpuUtilPerc), mem = mean(gpuMemUtilPerc)) %>%
mutate(eventName = test$eventName[i], taskId = test$taskId[i])
# print(test$eventName[i])
# print(comp_event)
if(!is.na(comp_event$hostname[1])){
# comp_event[c,] = c('test',0,0,0,0,0,0,0)
df = rbind(df, comp_event)
}
# print(comp_event)
print(class(comp_event))
}
View(comp_event)
class(comp_event)
comp_event[1,]
df = data.frame()
rbind(df, comp_event)
View(df)
df = rbind(df, comp_event)
View(df)
df = data.frame()
df = rbind(df, comp_event[1,])
View(df)
df = data.frame()
class(df)
as.data.frame(comp_event)
df = rbind(df, as.data.frame(comp_event))
View(df)
df = data.frame()
# names(df) = c("hostname","gpuSerial","watt","temp","cpu","mem","test1","test2")
c = 0
for(i in seq(1,length(test$timestamp),2)){
c = c + 1
comp_event = gpu_perf %>%
filter(hostname == test$hostname[i])
comp_event = comp_event %>%
filter(timestamp >= test$timestamp[i] & timestamp <= test$timestamp[i+1]) %>%
group_by(hostname, gpuSerial) %>%
summarise(watt = mean(powerDrawWatt), temp = mean(gpuTempC), cpu = mean(gpuUtilPerc), mem = mean(gpuMemUtilPerc)) %>%
mutate(eventName = test$eventName[i], taskId = test$taskId[i])
# print(test$eventName[i])
# print(comp_event)
if(!is.na(comp_event$hostname[1])){
# comp_event[c,] = c('test',0,0,0,0,0,0,0)
df = rbind(df, as.data.frame(comp_event))
}
# print(comp_event)
# print(class(comp_event))
}
View(df)
length(unique(df$taskId))
df2 = data.frame()
# names(df) = c("hostname","gpuSerial","watt","temp","cpu","mem","test1","test2")
for(i in seq(1,length(test$timestamp),2)){
print(i)
comp_event = gpu_perf %>%
filter(hostname == test$hostname[i])
comp_event = comp_event %>%
filter(timestamp >= test$timestamp[i] & timestamp <= test$timestamp[i+1]) %>%
group_by(hostname, gpuSerial) %>%
summarise(watt = mean(powerDrawWatt), temp = mean(gpuTempC), cpu = mean(gpuUtilPerc), mem = mean(gpuMemUtilPerc)) %>%
mutate(eventName = test$eventName[i], taskId = test$taskId[i])
# print(test$eventName[i])
# print(comp_event)
if(!is.na(comp_event$hostname[1])){
# comp_event[c,] = c('test',0,0,0,0,0,0,0)
df2 = rbind(df2, as.data.frame(comp_event))
}
# print(comp_event)
# print(class(comp_event))
}
View(gpu_perf)
str(app_task)
# Load each csv data file, correct timestamp using lubridate
app_check = read.csv(file = "data/application-checkpoints.csv")
app_check$timestamp = ymd_hms(app_check$timestamp)
str(app_check)
app_check = read.csv(file = "data/application-checkpoints.csv", colClasses = c('POSIXct','character','character','character','character','character'))
str(app_check)
View(app_check)
# Load each csv data file, correct timestamp using lubridate
app_check = read.csv(file = "data/application-checkpoints.csv", colClasses = c('character','character','character','character','character','character'))
app_check$timestamp = ymd_hms(app_check$timestamp)
task_xy = read.csv(file = "data/task-x-y.csv")
str(task_xy)
task_xy = read.csv(file = "data/task-x-y.csv", colClasses = c('character','character','int','int','int'))
View(task_xy)
task_xy = read.csv(file = "data/task-xy.csv")
task_xy = read.csv(file = "data/task-x-y.csv")
str(task_xy)
task_xy$taskId = as.character(task_xy$taskId)
task_xy$taskId = as.character(task_xy$taskId)
str(task_xy)
task_xy$jobId = as.character(task_xy$jobId)
app_task = app_check %>%
# Join task_xy to app_check on taskId
left_join(task_xy) %>%
# Drop unused variables
mutate(jobId = NULL) %>%
# Arrange by taskId and timestamp !! important for later processing !!
arrange(taskId, timestamp)
str(app_task)
cache('app_task')
str(gpu)
# Load csv data file, correct timestamp using lubridate and cache
gpu = read.csv(file = "data/gpu.csv")
gpu$timestamp = ymd_hms(gpu$timestamp)
gpu$hostname = as.character(gpu$hostname)
gpu$gpuUUID = NULL
View(gpu)
cache("gpu")
cache('app_task')
gpu_perf = gpu %>%
arrange(hostname, timestamp) %>%
mutate(gpuUUID = NULL)
View(df)
df2 = data.frame()
# names(df) = c("hostname","gpuSerial","watt","temp","cpu","mem","test1","test2")
for(i in seq(1,length(test$timestamp),2)){
# Progress monitor
print(i)
x = gpu_perf %>%
filter(hostname == test$hostname[i]) %>%
filter(timestamp >= test$timestamp[i] & timestamp <= test$timestamp[i+1]) %>%
group_by(hostname, gpuSerial) %>%
summarise(watt = mean(powerDrawWatt), temp = mean(gpuTempC), cpu = mean(gpuUtilPerc), mem = mean(gpuMemUtilPerc)) %>%
mutate(eventName = test$eventName[i], taskId = test$taskId[i])
if(!is.na(x$hostname[1])){
df2 = rbind(df2, as.data.frame(x))
}
}
df2 = data.frame()
# names(df) = c("hostname","gpuSerial","watt","temp","cpu","mem","test1","test2")
for(i in seq(1,length(test$timestamp),2)){
# Progress monitor
print(i)
x = gpu_perf %>%
filter(hostname == test$hostname[i])
x = x %>%
filter(timestamp >= test$timestamp[i] & timestamp <= test$timestamp[i+1]) %>%
group_by(hostname, gpuSerial) %>%
summarise(watt = mean(powerDrawWatt), temp = mean(gpuTempC), cpu = mean(gpuUtilPerc), mem = mean(gpuMemUtilPerc)) %>%
mutate(eventName = test$eventName[i], taskId = test$taskId[i])
if(!is.na(x$hostname[1])){
df2 = rbind(df2, as.data.frame(x))
}
}
View(gpu_perf)
test = function(){
print(i)
x = gpu_perf %>%
filter(hostname == test$hostname[i])
x = x %>%
filter(timestamp >= test$timestamp[i] & timestamp <= test$timestamp[i+1]) %>%
group_by(hostname, gpuSerial) %>%
summarise(watt = mean(powerDrawWatt), temp = mean(gpuTempC), cpu = mean(gpuUtilPerc), mem = mean(gpuMemUtilPerc)) %>%
mutate(eventName = test$eventName[i], taskId = test$taskId[i])
if(!is.na(x$hostname[1])){
df2 = rbind(df2, as.data.frame(x))
}
return(df2)
}
df2 = data.frame()
# names(df) = c("hostname","gpuSerial","watt","temp","cpu","mem","test1","test2")
for(i in seq(1,length(test$timestamp),2)){
# Progress monitor
print(i)
x = gpu_perf %>%
filter(hostname == test$hostname[i])
x = x %>%
filter(timestamp >= test$timestamp[i] & timestamp <= test$timestamp[i+1])
x = x %>%
group_by(hostname, gpuSerial) %>%
summarise(watt = mean(powerDrawWatt), temp = mean(gpuTempC), cpu = mean(gpuUtilPerc), mem = mean(gpuMemUtilPerc)) %>%
mutate(eventName = test$eventName[i], taskId = test$taskId[i])
if(!is.na(x$hostname[1])){
df2 = rbind(df2, as.data.frame(x))
}
}
df2 = data.frame()
# names(df) = c("hostname","gpuSerial","watt","temp","cpu","mem","test1","test2")
for(i in seq(1,length(test$timestamp),2)){
# Progress monitor
print(i)
x = gpu_perf %>%
filter(hostname == test$hostname[i])
x = x %>%
filter(timestamp >= test$timestamp[i] & timestamp <= test$timestamp[i+1]) %>%
group_by(hostname, gpuSerial) %>%
summarise(watt = mean(powerDrawWatt), temp = mean(gpuTempC), cpu = mean(gpuUtilPerc), mem = mean(gpuMemUtilPerc)) %>%
mutate(eventName = test$eventName[i], taskId = test$taskId[i])
if(!is.na(x$hostname[1])){
df2 = rbind(df2, as.data.frame(x))
}
}
for(i in seq(1,length(test$timestamp),2)){
# Progress monitor
print(i)
x = gpu_perf %>%
filter(hostname == test$hostname[i])
x = x %>%
filter(timestamp >= test$timestamp[i] & timestamp <= test$timestamp[i+1]) %>%
group_by(hostname, gpuSerial) %>%
summarise(watt = mean(powerDrawWatt), temp = mean(gpuTempC), cpu = mean(gpuUtilPerc), mem = mean(gpuMemUtilPerc)) %>%
mutate(eventName = test$eventName[i], taskId = test$taskId[i])
if(!is.na(x$hostname[1])){
df2 = rbind(df2, as.data.frame(x))
}
}
